<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Section 5: CI/CD Integration with Jenkins - Plan</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        min-height: 100vh;
        color: #e4e4e4;
        line-height: 1.6;
      }

      .container {
        max-width: 1100px;
        margin: 0 auto;
        padding: 40px 20px;
      }

      header {
        text-align: center;
        margin-bottom: 50px;
        padding: 30px;
        background: linear-gradient(135deg, #0f3460 0%, #533483 100%);
        border-radius: 16px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      }

      header h1 {
        font-size: 2.5rem;
        color: #fff;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      header p {
        color: #a5b4fc;
        font-size: 1.1rem;
      }

      .section {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 16px;
        padding: 30px;
        margin-bottom: 30px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        transition:
          transform 0.3s ease,
          box-shadow 0.3s ease;
      }

      .section:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      }

      .section h2 {
        color: #60a5fa;
        font-size: 1.5rem;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #3b82f6;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .section h2 .icon {
        font-size: 1.8rem;
      }

      .section h3 {
        color: #93c5fd;
        font-size: 1.2rem;
        margin: 20px 0 15px 0;
      }

      ul {
        list-style: none;
        padding-left: 0;
      }

      ul li {
        padding: 8px 0 8px 30px;
        position: relative;
      }

      ul li::before {
        content: "‚ñ∏";
        color: #22d3ee;
        position: absolute;
        left: 5px;
      }

      ol {
        padding-left: 25px;
      }

      ol li {
        padding: 8px 0;
      }

      code {
        background: rgba(0, 0, 0, 0.4);
        color: #f472b6;
        padding: 2px 8px;
        border-radius: 4px;
        font-family: "Consolas", "Monaco", monospace;
        font-size: 0.9em;
      }

      pre {
        background: #0d1117;
        border: 1px solid #30363d;
        border-radius: 8px;
        padding: 20px;
        overflow-x: auto;
        margin: 15px 0;
      }

      pre code {
        background: none;
        color: #c9d1d9;
        padding: 0;
      }

      .keyword {
        color: #ff7b72;
      }
      .string {
        color: #a5d6ff;
      }
      .comment {
        color: #8b949e;
      }
      .variable {
        color: #ffa657;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 8px;
        overflow: hidden;
      }

      th,
      td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      th {
        background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
        color: white;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.85rem;
        letter-spacing: 0.5px;
      }

      tr:hover {
        background: rgba(255, 255, 255, 0.05);
      }

      .checklist {
        background: rgba(34, 197, 94, 0.1);
        border-radius: 12px;
        padding: 20px;
        border: 1px solid rgba(34, 197, 94, 0.3);
      }

      .checklist li {
        padding: 12px 0 12px 35px;
        position: relative;
      }

      .checklist li::before {
        content: "‚òê";
        color: #22c55e;
        position: absolute;
        left: 5px;
        font-size: 1.2rem;
      }

      .task-list {
        background: rgba(59, 130, 246, 0.1);
        border-radius: 12px;
        padding: 20px;
        border: 1px solid rgba(59, 130, 246, 0.3);
      }

      .task-list li {
        padding: 10px 0 10px 35px;
        position: relative;
      }

      .task-list li::before {
        content: "‚úì";
        color: #3b82f6;
        position: absolute;
        left: 8px;
        font-weight: bold;
      }

      .note-box {
        background: linear-gradient(
          135deg,
          rgba(251, 191, 36, 0.1) 0%,
          rgba(245, 158, 11, 0.1) 100%
        );
        border-left: 4px solid #f59e0b;
        padding: 20px;
        border-radius: 0 12px 12px 0;
        margin: 20px 0;
      }

      .note-box h4 {
        color: #fbbf24;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .bonus-box {
        background: linear-gradient(
          135deg,
          rgba(168, 85, 247, 0.1) 0%,
          rgba(139, 92, 246, 0.1) 100%
        );
        border-left: 4px solid #a855f7;
        padding: 20px;
        border-radius: 0 12px 12px 0;
        margin: 20px 0;
      }

      .bonus-box h4 {
        color: #c084fc;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
      }

      .badge-mock {
        background: rgba(34, 197, 94, 0.2);
        color: #4ade80;
        border: 1px solid rgba(34, 197, 94, 0.4);
      }

      .badge-real {
        background: rgba(168, 85, 247, 0.2);
        color: #c084fc;
        border: 1px solid rgba(168, 85, 247, 0.4);
      }

      .step-number {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
        color: white;
        border-radius: 50%;
        font-weight: bold;
        margin-right: 10px;
      }

      strong {
        color: #f0abfc;
      }

      footer {
        text-align: center;
        padding: 30px;
        color: #6b7280;
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>üìã Section 5: CI/CD Integration with Jenkins</h1>
        <p>Complete plan for setting up your Jenkins pipeline</p>
      </header>

      <!-- Overview -->
      <div class="section">
        <h2><span class="icon">üéØ</span> Overview</h2>
        <p>
          This section requires you to set up a Jenkins CI/CD pipeline that
          automates building, testing, and pushing your Docker image.
        </p>
      </div>

      <!-- Part 1: Prerequisites -->
      <div class="section">
        <h2><span class="icon">‚öôÔ∏è</span> Part 1: Prerequisites</h2>

        <h3>1.1 Install Jenkins on Builder EC2</h3>
        <ul>
          <li>
            Follow the provided guide to install Jenkins on your Builder EC2
            instance
          </li>
          <li>
            The Jenkins agent already has Docker capabilities pre-configured
          </li>
        </ul>

        <h3>1.2 Configure Jenkins Credentials</h3>
        <ul>
          <li>
            Add <strong>DockerHub username</strong> credential (ID:
            <code>dockerhub-username</code>)
          </li>
          <li>
            Add <strong>DockerHub password</strong> credential (ID:
            <code>dockerhub-password</code>)
          </li>
        </ul>
      </div>

      <!-- Part 2: Fix and Extend -->
      <div class="section">
        <h2>
          <span class="icon">üîß</span> Part 2: Fix and Extend the Provided
          Jenkinsfile
        </h2>

        <h3>2.1 Issues to Fix in the Provided Jenkinsfile</h3>
        <ol>
          <li>
            <strong>Missing <code>parallel</code> block</strong> - The "Parallel
            Checks" stage has Linting and Security Scan stages but they're not
            wrapped in a <code>parallel</code> block
          </li>
          <li>
            <strong>Repository URL</strong> - Replace
            <code>https://github.com/your-repo.git</code> with your actual
            GitHub repo URL
          </li>
          <li>
            <strong>Image name</strong> - Replace
            <code>your-dockerhub-username</code> with your actual DockerHub
            username
          </li>
          <li>
            <strong>TODO sections</strong> - All stages have TODO placeholders
            that need real implementations
          </li>
        </ol>

        <h3>2.2 Stages to Implement</h3>
        <table>
          <thead>
            <tr>
              <th>Stage</th>
              <th>Description</th>
              <th>What to Add</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Clone Repository</strong></td>
              <td>Already provided</td>
              <td>Update repo URL to your GitHub repository</td>
            </tr>
            <tr>
              <td><strong>Parallel Checks: Linting</strong></td>
              <td>Run code quality tools</td>
              <td>
                Add Flake8 (Python), ShellCheck (Shell), Hadolint (Dockerfile)
              </td>
            </tr>
            <tr>
              <td><strong>Parallel Checks: Security Scan</strong></td>
              <td>Run security analysis</td>
              <td>Add Trivy (Docker images), Bandit (Python security)</td>
            </tr>
            <tr>
              <td><strong>Build Docker Image</strong></td>
              <td>Build the Flask app</td>
              <td>Add <code>docker build</code> command</td>
            </tr>
            <tr>
              <td><strong>Push to Docker Hub</strong></td>
              <td>Push image to registry</td>
              <td>
                Add <code>docker login</code> and
                <code>docker push</code> commands
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Part 3: Detailed Implementation -->
      <div class="section">
        <h2>
          <span class="icon">üìù</span> Part 3: Detailed Implementation Steps
        </h2>

        <h3><span class="step-number">1</span> Stage: Clone Repository</h3>
        <ul>
          <li>
            Update the <code>url</code> parameter to point to YOUR GitHub
            repository
          </li>
          <li>
            Keep branch as <code>main</code> (or change to your default branch)
          </li>
        </ul>

        <h3>
          <span class="step-number">2</span> Stage: Parallel Checks - Linting
        </h3>
        <p><span class="badge badge-mock">Mock Approach</span></p>
        <pre><code><span class="keyword">echo</span> <span class="string">'Running Flake8 linting...'</span>
<span class="keyword">echo</span> <span class="string">'Running ShellCheck...'</span>
<span class="keyword">echo</span> <span class="string">'Running Hadolint for Dockerfile...'</span>
<span class="keyword">echo</span> <span class="string">'Linting completed successfully!'</span></code></pre>

        <p><span class="badge badge-real">Real Implementation (Bonus)</span></p>
        <pre><code><span class="keyword">sh</span> <span class="string">'pip install flake8 && flake8 python/'</span>
<span class="keyword">sh</span> <span class="string">'hadolint path/to/Dockerfile'</span></code></pre>

        <h3>
          <span class="step-number">3</span> Stage: Parallel Checks - Security
          Scan
        </h3>
        <p><span class="badge badge-mock">Mock Approach</span></p>
        <pre><code><span class="keyword">echo</span> <span class="string">'Running Trivy security scan...'</span>
<span class="keyword">echo</span> <span class="string">'Running Bandit for Python security...'</span>
<span class="keyword">echo</span> <span class="string">'Security scan completed!'</span></code></pre>

        <p><span class="badge badge-real">Real Implementation (Bonus)</span></p>
        <pre><code><span class="keyword">sh</span> <span class="string">'trivy image ${IMAGE_NAME}'</span>
<span class="keyword">sh</span> <span class="string">'pip install bandit && bandit -r python/'</span></code></pre>

        <h3><span class="step-number">4</span> Stage: Build Docker Image</h3>
        <ul>
          <li>Navigate to the directory containing your Dockerfile</li>
          <li>Run <code>docker build</code> with appropriate tag</li>
        </ul>
        <pre><code><span class="keyword">sh</span> <span class="string">'docker build -t ${IMAGE_NAME}:${BUILD_NUMBER} -t ${IMAGE_NAME}:latest ./python/'</span></code></pre>

        <h3><span class="step-number">5</span> Stage: Push to Docker Hub</h3>
        <ul>
          <li>Login to DockerHub using credentials</li>
          <li>Push the built image</li>
        </ul>
        <pre><code><span class="keyword">sh</span> <span class="string">'''
    echo ${DOCKERHUB_PASSWORD} | docker login -u ${DOCKERHUB_USERNAME} --password-stdin
    docker push ${IMAGE_NAME}:${BUILD_NUMBER}
    docker push ${IMAGE_NAME}:latest
'''</span></code></pre>
      </div>

      <!-- Part 4: Parallel Block Structure -->
      <div class="section">
        <h2>
          <span class="icon">üîÄ</span> Part 4: Structure of the Fixed Parallel
          Block
        </h2>
        <p>The <code>parallel</code> block needs to be structured correctly:</p>
        <pre><code><span class="keyword">stage</span>(<span class="string">'Parallel Checks'</span>) {
    <span class="keyword">parallel</span> {
        <span class="keyword">stage</span>(<span class="string">'Linting'</span>) {
            <span class="keyword">steps</span> {
                <span class="comment">// linting commands here</span>
            }
        }
        <span class="keyword">stage</span>(<span class="string">'Security Scan'</span>) {
            <span class="keyword">steps</span> {
                <span class="comment">// security scan commands here</span>
            }
        }
    }
}</code></pre>
      </div>

      <!-- Part 5: Verification Checklist -->
      <div class="section">
        <h2><span class="icon">‚úÖ</span> Part 5: Verification Checklist</h2>
        <p>After running the pipeline, verify:</p>
        <div class="checklist">
          <ul>
            <li>
              <strong>Clone Repository</strong> - Jenkins successfully clones
              your GitHub repository
            </li>
            <li>
              <strong>Linting stage</strong> - Completes without errors (or
              reports linting issues)
            </li>
            <li>
              <strong>Security Scan stage</strong> - Completes without errors
              (or reports security findings)
            </li>
            <li>
              <strong>Both parallel stages run simultaneously</strong> - Check
              console output timestamps
            </li>
            <li>
              <strong>Build Docker Image</strong> - Docker image is built
              successfully
            </li>
            <li>
              <strong>Push to Docker Hub</strong> - Image appears in your
              DockerHub account
            </li>
            <li>
              <strong>Post actions</strong> - Success/failure messages display
              appropriately
            </li>
            <li>
              <strong>Check DockerHub</strong> - Verify the image exists at
              <code>your-username/flask-aws-monitor</code>
            </li>
          </ul>
        </div>
      </div>

      <!-- Part 6: Files -->
      <div class="section">
        <h2>
          <span class="icon">üìÅ</span> Part 6: Files You Need to Create/Modify
        </h2>
        <table>
          <thead>
            <tr>
              <th>File</th>
              <th>Location</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>Jenkinsfile</code></td>
              <td>Root of your repository</td>
              <td>Create/Fix</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Summary -->
      <div class="section">
        <h2><span class="icon">üìå</span> Summary of Key Tasks</h2>
        <div class="task-list">
          <ol>
            <li>Install Jenkins on Builder EC2 (follow the provided link)</li>
            <li>Configure DockerHub credentials in Jenkins</li>
            <li>
              Fix the Jenkinsfile:
              <ul>
                <li>Update repository URL</li>
                <li>Update DockerHub username</li>
                <li>Add proper <code>parallel</code> block structure</li>
                <li>Implement Linting stage (mock or real)</li>
                <li>Implement Security Scan stage (mock or real)</li>
                <li>Implement Docker Build stage</li>
                <li>Implement Docker Push stage</li>
              </ul>
            </li>
            <li>Run the pipeline</li>
            <li>Verify Docker image on DockerHub</li>
          </ol>
        </div>
      </div>

      <!-- Bonus -->
      <div class="section">
        <div class="bonus-box">
          <h4>üåü Bonus Points Available</h4>
          <ul>
            <li>
              Implement <strong>real</strong> linting tools (Flake8, ShellCheck,
              Hadolint) instead of mock commands
            </li>
            <li>
              Implement <strong>real</strong> security scanning (Trivy, Bandit)
              instead of mock commands
            </li>
          </ul>
        </div>
      </div>

      <!-- Notes -->
      <div class="section">
        <div class="note-box">
          <h4>üìù Important Notes</h4>
          <ul>
            <li>
              The exam explicitly states:
              <strong
                >"YOU MAY USE MOCK COMMANDS FOR LINTING AND SECURITY
                SCANNING"</strong
              >
            </li>
            <li>
              Mock commands are <code>echo</code> statements that simulate the
              tools
            </li>
            <li>
              The Jenkins agent already has Docker capabilities, so no
              additional Docker setup is needed
            </li>
          </ul>
        </div>
      </div>

      <footer>
        <p>Section 5 Plan - CI/CD Integration with Jenkins</p>
      </footer>
    </div>
  </body>
</html>
